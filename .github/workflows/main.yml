on: [push]

name: deploy-shiny-app

jobs:
  deploy-shiny:
    runs-on: ubuntu-20.04
    container: vinnykos/shinyauth
    steps:
      - uses: actions/checkout@v2
      - name: Checkout Repository
      
      - name: Set up Docker
        uses: docker/setup-docker@v2
        with:
          docker-version: 20.10.7
        
      - name: Run docker container image
        run: |
            whereis docker
            sudo docker run --rm -p 3838:3838 vinikos/shinyauth \
            -v ${{ github.workspace }}/bayesian_abtest_rshiny/app/:/srv/shiny-server/test_app \
            -v ${{ github.workspace }}/log/shiny-server/:/var/log/shiny-server/ vinnykos/shinyauth
